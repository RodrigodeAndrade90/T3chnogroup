{% extends 'base.html' %}
{% block css %}
<link rel="stylesheet" href="{{url_for('static', filename='css/gerenciamento_usuario.css')}}">
<link rel="stylesheet" href="{{url_for('static', filename='css/globals.css')}}">
<link rel="stylesheet" href="../static/css/gerenciamento_perfil.css">
{% endblock %}

{% block title %}
  <title>inFATEC-Gerenciamento-Usuario</title>
  {% endblock %}

{% block nav %}
  <!-- Aqui fica o nav -->
{% endblock %}

{% block header %}
<!--Header pagina-->  
   <header class= "navbar navbar-red flex-md-nowrap p-0 fundovermelho w-100">
     <!--Texto Header-->
     <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 textoheader font-weight-bold text-white">
       Gerenciamento de Perfil
     </a>
     <!--botao-->  
       <button class="navbar-toggler position-absolute d-md-none collapsed pt-3" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon text-white">
           <i class="fas fa-bars"></i>
         </span>
       </button>
   </header>
{% endblock %}

{% block conteudo%}
<script>
    //Recupera o email da URL
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const email = urlParams.get('email')
    //Redireciona para a home sem o parâmetro de email
    if (email){
      //Criando cookie
      document.cookie = 'email_logado=' + email;
      window.location.href = "/";
    }
    
  </script>

<body class="text-center" cz-shortcut-listen="true">
    
    <main class="px-5">
        <form method="POST" action="/cadastro">
            <!--Inserido Get apenas para validar, posteriormente será feito integração com backend -->
            <img class="logo mb-4" src="{{url_for('static', filename='imagens/logoinfatec.png')}}" alt="Logo InFatec" width="150">
            <div>
                <h3>Edite seu Perfil</h3>
            </div>
            <label class="input input-group mb-1">Nome Usuáio</label>
            <div class="input input-group mb-3">
                <input class="form-control" id="nome" name="nome" placeholder="Nome" type="text">
            </div>
            <label class="input input-group mb-1">Email Institucional</label>
            <div class="input input-group mb-3">
                <input class="form-control" id="email" name="email" placeholder="Email Institucional" type="email">
            </div>
            <label class="input input-group mb-1">CPF</label>
            <div class="input mb-3">
                <input type="text" class="form-control" id="cpf" name="cpf" placeholder="CPF">
            </div>
            <label class="input input-group mb-1">Nova Senha</label>
            <div class="input-group mb-3">
                <input class="form-control password-form" id="password" name="password" placeholder="Crie sua senha" type="password" value="">
                <span class="input-group-text height-eye" >
                 <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" id="togglePassword" fill="currentColor" style="cursor: pointer" class="bi bi-eye" viewBox="0 0 16 16">
                  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                </svg>
            </div>
            {% if erro %}
            <span class="text-danger">{{erro}}</span>
            {% endif %}
            <br />
            <br />

            <a href="/home" class="button botao-voltar btn btn-light mb-4 " type="button">Voltar</a>
            <button class="button botao-enviar btn btn-light mb-4" value="Exibir Alert" type="submit">Enviar</button>
        </form>
    <script>
            const togglePassword = document.querySelector("#togglePassword");
        const password = document.querySelector("#password");
        
        togglePassword.addEventListener("click", function () {
           
          // toggle the type attribute
          const type = password.getAttribute("type") === "password" ? "text" : "password";
          password.setAttribute("type", type);
          // toggle the eye icon
          this.classList.toggle('bi-eye');
          this.classList.toggle('bi-eye-slash');
        });
    
        const toggleConfirmacao_senha = document.querySelector("#toggleConfirmacao_senha");
        const confirmacao_senha = document.querySelector("#confirmacao_senha");
    </script>
</body>
{% endblock %}

